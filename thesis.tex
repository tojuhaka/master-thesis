\documentclass[utf8]{gradu3}
% Jos työ on kandidaatintutkielma eikä pro gradu, käytä ylläolevan asemesta
%\documentclass[utf8,bachelor]{gradu3}
% Jos kirjoitat englanniksi, käytä ylläolevan asemesta
%\documentclass[utf8,english]{gradu3}
% tai
%\documentclass[utf8,bachelor,english]{gradu3}

\usepackage{graphicx} % kuvien mukaan ottamista varten

\usepackage{amsmath} % hyödyllinen jos tekstisi sisältää matikkaa,
                     % ei pakollinen

\usepackage{booktabs} % hyvä kauniiden taulukoiden tekemiseen

% HUOM! Tämän tulee olla viimeinen \usepackage koko dokumentissa!
\usepackage[bookmarksopen,bookmarksnumbered,linktocpage]{hyperref}

\addbibresource{thesis.bib} % Lähdetietokannan tiedostonimi

\begin{document}

\title{\LaTeX-tutkielmapohjan {gradu3} käyttö}
\translatedtitle{Usage of the {gradu3} document class for \LaTeX\ theses}
\studyline{Kaikki suuntautumisvaihtoehdot}
\avainsanat{%
  \LaTeX,
  {gradu3},
  pro gradu -tutkielmat,
  kandidaatintutkielmat,
  käyttöohje}
\keywords{\LaTeX, {gradu3}, Master's Theses, Bachelor's Theses, user's guide}
\tiivistelma{%
  Tämä kirjoitelma on esimerkki siitä, kuinka
  {gradu3}-tutkielmapohjaa käytetään.  Se sisältää myös
  käyttöohjeet ja tutkielman rakennetta koskevia ohjeita.

  Tutkielman tiivistelmä on tyypillisesti lyhyt esitys, jossa
  kerrotaan tutkielman taustoista, tavoitteesta, tutkimusmenetelmistä,
  saavutetuista tuloksista, tulosten tulkinnasta ja johtopäätöksistä.
  Tiivistelmän tulee olla niin lyhyt, että se, englanninkielinen
  abstrakti ja muut metatiedot mahtuvat kaikki samalle sivulle.
}
\abstract{%
  This document is a sample {gradu3} thesis document class
  document.  It also functions as a user manual and supplies
  guidelines for structuring a thesis document.

  The English abstract of a thesis should usually say exactly the same
  things as the Finnish tiivistelmä.
}

\author{Antti-Juhani Kaijanaho}
\contactinformation{Ag~C416.1, \texttt{antti-juhani.kaijanaho@jyu.fi}}
% jos useita tekijöitä, anna useampi \author-komento
\supervisor{Ohjaamaton työ}
% jos useita ohjaajia, anna useampi \supervisor-komento

\type{tutkielmapohjan esimerkki ja käsikirja} % et tarvitse tätä riviä tutkielmassa!

\maketitle

\preface
Tähän voit kirjoittaa tutkielmasi esipuheen.  Tutkielmissa on
harvemmin esipuheita, mutta jos sen kirjoitat, pidä se lyhyenä
(enintään sivu).

Esipuheen tulisi kertoa ennemminkin tutkielmaprosessista kuin
tutkielman sisällöstä.  Esimerkiksi jos tutkielman aiheen valintaan
tai tekemiseen liittyy jokin erikoinen sattumus, voit siitä kertoa
esipuheessa.  Tapana esipuheessa on myös kiittää nimeltä mainiten
tärkeimpiä tutkielman tekemisessä auttaneita ihmisiä -- ainakin
ohjaajia, puolisoa ja lapsia.  (Yleensä perhe on auttanut vähintään
tukemalla ja kannustamalla.)

Esipuhe kannattaa kirjoittaa minä-muodossa. Tavanomaista on myös
allekirjoittaa se.

Jyväskylässä \today

\bigskip

Tutkielman tekijä


\begin{thetermlist}
\item[Sovellusarkkitehtuuri] Donald Knuthin 1977--1989 laatima eräajotyyppinen
  ladontajärjestelmä \parencite[ks.][]{knuth86:_texbook}. 
\item[MVC] \TeX in \parencite[ks.][]{knuth86:_texbook} päälle
  rakennettu rakenteisten kirjoitelmien ladontaan tarkoitettu
  järjestelmä \parencite[ks.][]{lamport94:_latex}.  Siitä on nykyään
  käytössä versio \LaTeXe.
\item[Sovelluskehys] \TeX in \parencite[ks.][]{knuth86:_texbook} päälle
  rakennettu rakenteisten kirjoitelmien ladontaan tarkoitettu
  järjestelmä \parencite[ks.][]{lamport94:_latex}.  Siitä on nykyään
  käytössä versio \LaTeXe.
\end{thetermlist}

\chapter{Johdanto}

\section{Tausta}
\section{Tutkimuskysymys}
MVC-arkkitehtuuri on saanut paljon huomiota web-sovelluskehyksien
toteutuksissa ja useat web-sovelluskehykset ovat luokiteltu
MVC-pohjaisiksi sovelluskehyksiksi \parencite{mvcframeworks}. Se on kuitenkin alunperin
tarkoitettu matalan tason käyttöliittymäsovellusten toteuttamiseen,
jossa esimerkiksi hallitaan yksittäisiä näppäimistöltä tulleita
syötteitä eikä sitä ole suoraan tarkoitettu käytettäväksi
web-sovellusten ohjelmointiin. Alkuperäisen MVC:n toteutuksen
soveltuvuutta web-ohjelmointiin onkin epäilty. Esimerkiksi Leff
soveltaa artikkelissaan MVC:n käyttämistä web-sovelluksissa, mutta
samalla esittelee alkuperäisen MVC:n toteuttamisen ongelmana. Tämä johtuu web-sovelluksen jakautumisesta asiakkaan
(client) ja palvelimen (server) välille \parencite{ibm_watson}. Myös Pyramid-sovelluskehyksen tekijät
kyseenalaistavat MVC-arkkitehtuurin toteutuksen Pyramidissa ja uskovat
MVC:n olevan sellaisenaan sopimaton web-ohjelmointiin, vaikka
Pyramidin toteutus onkin hyvin lähellä alkuperäistä MVC:tä
\parencite{pyramid}. Django on myös toteutettu MVC:n pohjalta, mutta
se ei kuitenkaan toteuta MVC:tä sellaisenaan \parencite{django}.

Tutkimuksen tarkoituksena on selvittää millä tavalla
MVC-arkkitehtuuri on toteutettu web-sovelluskehyksissä ja miten se
eroaa alkuperäisestä MVC:n toteutuksesta. Lisäksi laajennetaan
Flask-sovelluskehys toteuttamaan alkuperäinen MVC niinkuin Krasner on
sen määritellyt \parencite{krasner}. Havaintojen pohjalta
selvitetään voidaanko MVC tuoda sellaisenaan sovelluskehykseen ja
mitä mahdollisia ongelmia se tuo.

\section{Aiheen rajaus}
Tutkimus on rajattu tarkastelemaan MVC-arkkitehtuurin
toteutusta Pythonilla kirjoitetuissa
web-sovelluskehyksissä. Tarkasteltavat web-sovelluskehykset ovat rajattu 
Pyramid-, Django-, Plone- sekä Flask-sovelluskehyksiin, joista
Pyramid, Django ja Plone toteuttavat MVC:n kaltaisen
sovellusarkkitehtuurin. Flask on sovelluskehys, joka tarjoaa vain
välttämättömät kirjastot web-sovelluksen toteuttamiseen. Sitä
käytetään tutkimuksessa työkaluna selvittämään miten MVC tulisi
toteuttaa sovelluskehykseen. Kun puhutaan MVC:stä tarkoitetaan tällä Krasnerin
artikkelissa esiteltyjä määrittelyitä MVC:n
toteutuksesta \parencite{krasner}. Tarkasteltavat sovelluskehykset käydään yleisellä tasolla läpi. 
Tällä tarkoitetaan sovelluskehyksen historian ja käyttötarkoituksen esittelemistä. Sovelluskehyksien
teknisiin ominaisuuksiin ja käyttämiseen ei tutkimuksessa perehdytä muutakuin MVC:n osalta.

\chapter{Tutkimuksen Rakenne}
Tutkimus aloitetaan kirjallisuuskatsauksella, jossa tarkastellaan mitä aiempaa 
tutkimusta MVC:stä on tehty. Lisäksi käydään
läpi mitä lähteitä löytyy Python-pohjaisista web-sovelluskehyksistä. Tämän jälkeen 
tutkitaan MVC:n historiaa sekä millä tavalla MVC on tarkoitettu toteutettavaksi.
Tässä vaiheessa käydään läpi jokaisen MVC-komponentin tarkoitus sekä niiden 
keskinäisen kommunikaation rakentuminen. Lisäksi esitellään
Dortmundin yliopistossa kirjoitettu esimerkkiohjelma Smalltalkilla siitä miten MVC:n 
toteutus tuodaan sovellukseen käytännössä.

MVC:n tarkastelun jälkeen esitellään tutkimuksessa käytetyt web-sovelluskehykset, 
joita käytetään apuna MVC:n tutkimisessa. Sovelluskehyksistä käydään läpi sen 
historia sekä yleisellä tasolla mihin käyttötarkoitukseen
sovelluskehys on tarkoitettu. Tämän jälkeen verrataan MVC:n toteutusta erikseen 
jokaiseen sovelluskehykseen ja selvitetään millä tavalla niiden sovellusarkkitehtuuri 
mahdollisesti eroaa MVC:stä,
Havaintojen perusteella pohditaan MVC:n mahdollisia ongelmia sovelluskehyksien toteutuksessa 
ja selvitetään löytyykö sovelluskehyksien arkkitehtuurista jotain yhtenäisiä piirteitä, mitkä ovat
kytköksissä MVC:n toteutukseen. Lisäksi kirjoitetaan Flask-sovellus, joka toteuttaa MVC:n 
niinkuin se on alunperin tarkoitettu.

Tutkimuksen lopuksi koostetaan havainnoista yhteenveto, jossa pohditaan saatuja tuloksia ja selvitetään 
pystytäänkö niiden perusteella vastaamaan tutkimuskysymykseen.


\chapter{Kirjallisuuskatsaus}
\section{Toteutus}
Kirjallisuuskatsauksessa käydään läpi vaihe vaiheelta, miten
lähdemateriaalia kerätään tutkimusta varten. Lähdemateriaalin 
haku toteutetaan hakukoneilla, jotka ovat tarkoitettu erityisesti 
tieteellisten artikkeleiden etsimiseen. Tässä tutkielmassa käytetyt 
hakukoneet ovat seuraavat: IEEE Xplore, ACM Digital Library, 
Google Scholar sekä joissakin tapauksissa Google:n yleinen
hakukone. Yleistä hakukonetta on käytetty esimerkiksi
sovelluskehyksien dokumentaatioiden etsintään.

Aluksi muodostetaan kokonaiskuva tuloksista, jolloin silmäillään läpi
saatuja artikkeleita. Tässä vaiheessa tarkoitus ei ole vielä valita
mitään pohjaksi tutkielmalle, vaan kerätä informaatiota siitä
millainen lähdemateriaali on tarjolla kokonaisuudessaan. Saaduista 
tuloksista poimitaan artikkeleita, jotka sopivat tutkimuksen aihepiiriin.
Seuraavaksi artikkeleista valitaan tutkielmalle
pohjakirjallisuus. Tässä vaiheessa artikkelit luetaan huolellisesti
läpi ja varmistutaan siitä, että ne ovat tieteellisesti päteviä
tutkielmaa varten. Erityisesti kiinnitetään huomiota viittauksien
määrän valittaessa tärkeimmät lähdemateriaalit. Tutkielmassa esiintyy myös satunnaisia viittauksia,
joita ei ole kirjallisuuskatsauksessa mainittu. Tutkimuksen
pääkirjallisuus kuitenkin käydään läpi kirjallisuuskatsauksessa.
Haussa käytetään seuraavia hakutermejä: "MVC", "MVC Architecture",
"frameworks", "web frameworks" ja  "MVC- Architecture". Erityisesti artikkeleita löytyy
MVC-arkkitehtuurin soveltamisesta erilaisissa
tekniikoissa. Tarkasteltavat artikkelit rajataan kuitenkin niihin,
jotka esittelevät suoraan MVC:tä itseään tai tarjoavat
lähdemateriaalin sovelluskehyksien esittelyyn.

\section{MVC}
Google Scholarin tuloksista löytyy kolme artikkelia MVC:stä, jotka sopivat 
lähdemateriaaliksi tutkimukseen. Ensimmäinen artikkeleista on John
Deaconin  kirjoittama artikkeli, joka tarkastelee lyhyesti
MVC:tä \parencite{deacon}. Artikkeli on kuitenkin hyvin suppea, mutta selittää
tiivistetysti MVC:n idean. Toinen artikkeli on Steve Burbeckin kirjoittama, 
joka käsittelee
MVC:tä sellaisena kuin sitä käytettiin Smalltalkissa \parencite{burbeck}. Burbeckin
artikkeliin viitataan monissa MVC:tä käsittelevissä
julkaisuissa, joten sen arvo tämän tutkielman pohjakirjallisuudessa on
vahva. Viittausten määrä on katsottu hakemalla artikkelia Google
Scholarin hakukoneessa. Viittauksia kyseiseen artikkeliin on
kirjoitushetkellä 308. Seuraavaksi kartoitetaan pohjakirjallisuutta käyttäen ACM Digital
Library sekä IEEE XPlore -hakukoneita. Kolmas artikkeli Glenn
E. Krasnerin kirjoittama julkaisu, jossa esitellään MVC:n toteutusta
erilaisissa Smalltalk-sovelluksissa. Julkaisusta löytyy useita
versioita, joista tässä tutkielmassa käytetään
molempia \parencite{krasner} [krasner\_descr]. Tähän artikkeliin on
myös viitattu runsaasti, joten se on Burbeckin julkaisun kanssa
tärkeimpiä lähteitä MVC:n pohjakirjallisuudessa. Kirjoitushetkellä
viittauksia Krasnerin artikkeliin on 2263. Monien MVC-arkkitehtuuria soveltavien artikkeleiden
lähdeviitteistä löytyy viittauksia Burbeckin ja Krasnerin
artikkeleihin. Tämän perusteella pystytään toteamaan kyseisten
artikkeleiden olevan tieteellisesti päteviä ja tarjoavan kattavan
lähdemateriaalin MVC:n pohjaksi. Burbeckin ja Krasnerin kirjoittamien
artikkeleiden taustalta löytyy MVC-arkkitehtuurin alkuperäinen kehittäjä Trygve
Reenskaug, jonka omia julkaisuja sekä kotisivujen MVC-osiota käytetään
myös lähteenä tutkielmassa \parencite{xerox, xerox-thing, xerox-original}.

\section{Web-sovelluskehykset}
Web-sovelluskehyksistä löydetty kirjallisuus on hyvin
suppea, eikä niiden varaan voida rakentaa kovinkaan perusteellista
tieteellistä pohjaa. Tämän vuoksi tutkimuksessa joudutaan osaksi turvautumaan
sovelluskehyksien omaan dokumentatioon täydentämään
lähdemateriaalia. IEEE Xploren ja ACM Digital Libraryn avulla löytyy kaksi
artikkelia, joita käytetään tutkimuksen pohjana sovelluskehyksiä
tarkastellessa. Ensimmäinen artikkeli on Okanovicin ja Mateljan
kirjoittama artikkeli, jossa esitellään web-sovelluskehyksien suunnittelua \parencite{okanovic}. 
Se myös sivuuttaa lyhyesti MVC:tä. Toisena artikkelina käytetään ACM:stä tuloksena saatua Iwan
Vosloon julkaisua, jossa käydään läpi yleisesti web-sovelluskehyksien
rakennetta \parencite{vosloo}. Google Scholarin hakutuloksista löytyi Liza Daly:n
kirjoittama ja O'Reillyn julkaisema "Next Generation Web Frameworks
in Python", joka sisältönsä puolesta sopii hyvin pohjaksi
tutkimuksessa käsiteltävien sovelluskehyksien lähdemateriaaliksi 
\parencite{liza}.

\chapter{MVC}
MVC-arkkitehtuurin perusajatus on erottaa käyttöliittymä sovelluslogiikasta ja
näin tehdä sovelluksesta helposti ylläpidettävä kolmen eri komponentin avulla:
Malli (Model), Näkymä (View) ja Ohjain (Controller). Jokainen komponentti on
erikoistunut sovelluksessa johonkin tiettyyn tehtävään. Mallin tehtävänä on
hallita sovelluksen tilaa ja vastata sen käsittelemästä datasta ohjaimelle ja näkymälle.
Näkymän tehtävänä on taas toteuttaa sovellukselle käyttöliittymä. Ohjaimen tarkoitus on ottaa
vastaan syötteitä käyttäjältä käskien mallia ja näkymää muuttumaan tarvittaessa.

\begin{figure}[h]
\centering
\includegraphics[scale=0.85]{krasner_mvc.jpg}
\caption{Model-View-Controller State and Message Sending \cite[s. 5]{krasner_desc}}
\end{figure} 
Jokaisella komponentilla on oma rajattu tehtävänsä ja ohjelmakoodi tulee jakaa näiden komponentien kesken. Jotta MVC:tä pystyttäisiin käyttämään
tehokkaasti, tulee ymmärtää komponenttien työnjako sekä se kuinka komponentit kommunikoivat keskenään \parencite{burbeck}. 

Luodessamme MVC-arkkitehtuurin toteuttavia komponentteja, tulee ne periä jostakin abstraktista pohjaluokasta (Model, View tai Controller), joka määrittelee kyseisen komponentin käyttäytymisen MVC:ssä  \parencite[s. 5]{krasner_desc}.  Tässä kappaleessa käydään jokaisen komponentin toteutus erikseen läpi käyttäen ohjelmointikielenä Smalltalkia. Lähteenä käytetään Krasnerin julkaisua \parencite{krasner_desc}.

Yleisesti MVC-komponenttien toimintaa kuvaavassa esimerkissä käyttäjältä tulee jokin syöte, jonka sillä hetkellä aktiivinen ohjain ottaa vastaan. Syötteen perusteella ohjain lähettää mallille viestin. Malli puolestaan tekee sille määrättyjä operaatioita muuttaen tilaansa ja lähettää edelleen viestin muutoksestaan kaikille siihen kiinnitettyille riippuvuuksille (näkymät ja ohjaimet). Näkymät
voivat tämän jälkeen kysyä mallilta sen nykyistä tilaa ja päivittää itsensä, jos siihen on tarvetta. Ohjaimet voivat myös muuttaa tilaansa riippuen mallin tilasta \parencite[s. 4]{krasner_desc}. 

MVC:n avulla luodaan illuusio siitä, että käyttäjä kommunikoi suoraan mallin kanssa. Todellisuudessa kuitenkin ohjain ja näkymä muodostavat yhdessä rajapinnan sille, miltä malli näyttää ulospäin ja miten sitä käsitellään. Ohjain huolehtii syötteiden vastaanottamisesta ja käsittelemisestä. Näkymä taas huolehtii mallin graafisesta puolesta \cite[s. 11-12]{Reenskaug:tools}. 

\section{Historia}
MVC:n esitteli Trygve Reenskaug ollessaan mukana Xerox PARC -tutkimushankkeessa. 
Ensimmäinen julkaisu MVC:stä kirjoitettiin vuonna 1978 samassa tutkimuskeskuksessa. 
Tuolloin julkaisussa esiteltiin kolmen komponentin sijasta neljä komponenttia: 
Malli (Model), Näkymä(View), Ohjain(Controller) sekä Muokkaaja(Editor). Muokkaaja on 
väliaikainen komponentti, jonka näkymä luo itsensä ja syötelaitteiden välille. 
Muokkaaja-komponentista kuitenkin luovuttiin käsitteenä ja se sisällytettiin näkymään 
ja ohjaimeen \parencite{xerox}. Alkuperäinen Xerox PARC:n tuottama raportti MVC:stä oli Reenskaugin 
vuonna 1979 kirjoittama THING-MODEL-VIEW-EDITOR \parencite{xerox-thing}. Raportti esitteli MVC:n 
komponentteja käyttäen hyväksi esimerkkejä Reenskaugin omasta suunnittelutyöstä. 
Reenskaug päätyi kuitenkin termeihin Model-View-Controller ja julkaisi saman vuoden 
lopulla raportin, jossa määritellään lyhyesti jokaisen komponentin tehtävä 
(MODELS-VIEWS-CONTROLLERS) \parencite{xerox-original}. Koska MVC:n historia ja 
suurin osa MVC:n alkuperäisistä julkaisuista pohjautuvat 
Smalltalk-ohjelmointikieleen, joudutaan väistämättä sitomaan MVC:n tarkastelu 
Smalltalk:iin. Tämä ei kuitenkaan rajoita tarkastelua, koska arkkitehtuurin 
idea pysyy täysin samana riippumatta ohjelmointikielestä.
\section{Malli (Model)}

\section{Näkymä (View)}
\section{Ohjain (Controller)}
\section{Esimerkkiohjelma}

\chapter{Web-sovelluskehykset}
\section{Tausta \& Teoria}
\section{Pyramid}
\section{Django}
\section{Plone}
\section{Flask}

\chapter{MVC:n toteutus web-sovelluskehyksissä}
\section{Yleistä}
\section{Pyramid}
\section{Django}
\section{Plone}

\chapter{MVC and Flask}
\section{Esimerkkiohjelma}
\section{Pohdinta}
\section{Yhteenveto}

\chapter{Johtopäätökset}



Apua sen käyttämiseen voit saada Tutkielma-TeX"-postituslistalta
(\url{http://lists.jyu.fi/mailman/listinfo/tutkielma-tex}).
Kommentteja, parannusehdotuksia ja bugiraportteja voit lähettää myös
minulle suoraan.

\begin{figure}[h]\centering
  \includegraphics[height=5cm,keepaspectratio]{opus-kissa}
  \caption[\LaTeX-oppaani \parencite{kaijanaho03:_latex_ams_latex}
  kansikuva]{\LaTeX-oppaani \parencite{kaijanaho03:_latex_ams_latex}
    kansikuva on tässä vain esimerkkinä kuvan ottamisesta mukaan
    tutkielmaan.}
  \label{fig:opus-kissa}
\end{figure}

Tämä malli olettaa, että tunnet \LaTeX-järjestelmän käytön perusasiat.
Alkuperäinen \LaTeX-kirja \parencite{lamport94:_latex} on järjestelmän
virallinen käyttöopas.  Olen myös itse kirjoittanut aiheesta
opaskirjan \parencite{kaijanaho03:_latex_ams_latex}.\footnote{Monet
  \TeX- ja \LaTeX-kirjat käyttävät kansikuviensa aiheena kissaeläintä.
  Oman monisteeni kansikuva oli varsin abstrakti kisuli,
  ks.~kuvio~\ref{fig:opus-kissa}.}  Hyvä suomenkielinen, vapaasti
verkosta saatavilla oleva opas on \textit{Pitkänpuoleinen johdanto
  \LaTeXe:n käyttöön} \parencite{oetiker:_pitka_latex}.  Muista lukea
tämän mallin ladotun version (PDF tms) lisäksi sen \LaTeX-lähdekoodi!

Huomaa, että tämän mallin esittämät ohjeet eivät ole millään tavalla
virallisia.  Noudata aina ohjaajasi neuvoja vaikka ne poikkeaisivatkin
tämän mallin ohjeista.

\chapter{Tutkielman rakenne}

Yhteensä tutkielmassa on hyvä olla 5--9 numeroitua
lukua, siis Johdanto ja Yhteenveto mukaan lukien.  Tarvittaessa voit
käyttää alilukuja tarkempaan jäsentelyyn.

Johdannon ja Yhteenvedon väliin jääviä lukuja kutsutaan toisinaan
tutkielman \textit{käsittelyosaksi}.  Usein sen katsotaan jakaantuvan
vielä kahtia, jolloin käsittelyosa alkaa \textit{teoriaosalla} ja
päättyy joko \textit{päälauseeseen}, \textit{konstruktiiviseen osaan}
tai \textit{empiiriseen osaan}.

\section{Teoriaosa}

Tutkielman teoriaosan tarkoituksena on esitellä tutkielmassa
tarvittava teoreettinen tausta.  Tämä on syytä tehdä vähintään sillä
tarkkuudella, että tutkielman lukija pystyy pelkästään tutkielman
itsensä perusteella ymmärtämään kaikki tutkielmassa käytettävät
erityiskäsitteet ja "=menetelmät.  Hyvässä tutkielmassa on myös
perusteltu (vaihtoehdot kirjallisuudesta esille tuoden), miksi juuri
nämä käsitteet ja menetelmät on työssä käytössä.

Teoriataustan järkevä esitys- ja käyttötapa riippuu siitä, minkä
tyyppisestä tutkimuksesta tutkielmassasi on kyse.
Matemaattis-teoreettisen työn teoriaosa on aivan eri näköinen kuin
konstruktiivisen ohjelmistonkehitystyön teoriaosa; näistä myös eroaa
olennaisesti ihmistieteellisiin traditioihin nojautuvan määrällisen
tai laadullisen tutkimustuön teoriaosa.  Muita samantyyppisiä
tutkielmia ja julkaistuja tutkimusraportteja lukemalla saat kyllä
käsityksen siitä, mitä omalta työltäsi vaaditaan.

\section{Teorian jälkeen}

Teoriaosan jälkeen tulee työsi varsinainen kontribuutio:
\begin{itemize}
\item Matemaattis-teoreettisessa työssä se on yleensä jono itse
  laatimiasi määritelmiä ja lemmoja, jotka kulminoituvat työn
  päälauseen todistukseen.
\item Konstruktiivisessa työssä se on itse laatimasi tietokoneohjelma
  tai muu artefakti.
\item Empiirisessä työssä se on jotain empiiristä tutkimusmenetelmää
  soveltamalla saavutettu joukko empiirisiä tuloksia.
\end{itemize}

Tutkielmassa kontribuutio esitellään varsin tarkasti, tehdyt valinnat
perustellen.  Erityisesti matemaattis-teoreettisissa ja empiirisissä
töissä on syytä noudattaa kulloisenkin tutkimustradition käytänteitä
-- esimerkiksi ihmistieteellinen koeasetelma on kuvattava tarkasti.

\chapter{Lähteiden käyttö}

Teoriaosa perustuu lähes aina yksinomaan lähdekirjallisuuteen.  Myös
kontribuutio"-osassa on lähteiden käyttö toisinaan tarpeen.

Muista varoa plagiointia.  Jos kopioit joko sellaisenaan tai lievästi
muutettuna (tai esimerkiksi englannista suomennettuna) tekstiä jostain
lähteestä, tee selväksi, että olet tehnyt niin.  Merkitse lainaukset
(lainausmerkeillä tai muulla selkeällä tavalla) ja anna täsmällinen
lähdeviite.  Jos et lainaa sanatarkasti, merkitse tekemäsi muutokset.
Useimmissa tilanteissa on kuitenkin parempi esittää asia omin sanoin,
mieluiten useamman lähteen perusteella.  Merkitse tällöinkin
käyttämäsi lähteet.

Lähdeluettelon laadintaan {gradu3} käyttää automaattisesti
\textsc{Bib\LaTeX}-järjestelmää \parencite{biblatex-manual} ja sen
Chicago-tyyliä \parencite{biblatex-chicago-manual}.  Tämän
automatiikan saa pois \string\documentclass-optiolla manualbib, mutta
tällöin joudut itse huolehtimaan lähdeluettelon muotoilusta eivätkä
tässä luvussa esitetyt tekniikat ole (välttämättä) käytettävissä.
Huomaa, että Tietotekniikan laitoksen graduissa on suositeltavaa
käyttää Chicago-tyylistä lähdeluetteloa.

\section{Lähdeviittaukset}

Lähteisiin voit viitata kahdella tavalla.  Ensinnäkin voit käyttää
lähdettä lauseen subjektina: \textcite[luku~8.8.4]{aho-compilers}
kuvaavat lyhyesti graafinvärityksen käyttämisen kääntäjän
rekisterinvalinnassa.  Tällöin viittaukseen käytetään
\string\textcite-komentoa.  Toisekseen lähdeviite voi olla
sivuhuomautus, jota ei ääneen luettaessa mainita: Graafinväritys on
yksi mahdollinen tapa valita
rekisterit \parencite[luku~8.8.4]{aho-compilers}.  Tämä toteutetaan
\string\parencite-komennolla.

Sekä \string\textcite- että \string\parencite-komennot ottavat kolme
parametria, joista kaksi on valinnaisia.  Ensimmäinen (valinnainen)
parametri on esihuomautus, toinen (valinnainen) parametri on
jälkihuomautus ja kolmas (pakollinen) parametri on lähdeviittauksen
koodi \parencite[ks.][luku~3.7]{biblatex-manual}.  Edellisen virkkeen
lähdeviite tehtiin seuraavalla komennolla:

\begingroup\footnotesize
\begin{verbatim}
\parencite[ks.][luku~3.7]{biblatex-manual}
\end{verbatim}
\endgroup

Jos komennolle annetaan vain yksi valinnainen (eli hakasulkeisiin
kirjoitettu) argumentti, se tulkitaan jälkihuomautukseksi.  Jos
halutaan antaa vain esihuomautus ilman jälkihuomautusta, on
jälkihuomautus jätettävä tyhjäksi
\parencite[ks.][]{biblatex-manual}:

\begingroup\footnotesize
\begin{verbatim}
\parencite[ks.][]{biblatex-manual}
\end{verbatim}
\endgroup

On myös mahdollista viitata useampaan lähteeseen samassa viittauksessa 
%
\parencites%
  [ks.][luku~3.7]{biblatex-manual}%
  [ks.~lähteiden käytöstä yleisesti myös][luku~5.3.2]%
    {biblatex-chicago-manual}%
\relax.
%
Tämä tehdään komennolla \string\parencites, jolle annetaan kutakin
lähdettä kohti samat argumentit kuin yksittäiselle
\string\parencite"-komennolle.  Komento on hyvä (mutta ei pakko)
päättää \string\relax-komentoon, jotta yllätyksiltä vältyttäisiin.

\begingroup\footnotesize
\begin{verbatim}
\parencites%
  [ks.][luku~3.7]{biblatex-manual}%
  [ks.~lähteiden käytöstä yleisesti myös][luku~5.3.2]%
    {biblatex-chicago-manual}%
\relax.
\end{verbatim}
\endgroup

Jos jaat \string\parencites"-komennon usealle riville, päätä rivit
kommenttimerkillä (kuten yllä), jotta tulokseen ei ilmaantuisi
ylimääräisiä välilyöntejä.

\section{Lähdetietokanta}

Lähteet lisätään erilliseen \textsc{Bib\TeX}"-tiedostomuodossa olevaan
lähdetietokantaan.  Sen laatimisessa voit käyttää apuna monia
lähteidenhallintajärjestelmiä, mutta sen voi laatia myös käsin.
Tietokannan nimi kirjoitetaan \string\addbibresource-komennon
argumentiksi.

\textsc{Bib\TeX}-muotoinen lähdetietokanta on erityisellä tavalla
muotoiltu tekstitiedosto.  Se koostuu tietueista, jotka alkavat
@-merkillä ja sitä seuraavalla tietuetyypin nimellä.  Muu osa
tietueesta kirjoitetaan aaltosulkeiden sisään.  Esimerkiksi edellä
mainittu kääntäjäkirja \parencite{aho-compilers} voidaan
esittää seuraavanlaisena tietueena:

\begingroup\footnotesize
\begin{verbatim}
@Book{aho-compilers,
  author =       {Alfred V. Aho and Monica S. Lam and Ravi Sethi and
                  Jeffrey D. Ullman},
  title =        {Compilers},
  subtitle =     {Principles, Techniques, \& Tools},
  publisher =    {Pearson Addison Wesley},
  year =         2007,
  address =      {Boston},
  edition =      2
}
\end{verbatim}
\endgroup%

Tämän tietueen tyyppi on book, joka tarkoittaa luonnollisestikin
kirjaa.  Aaltosulkeiden sisällä oleva ensimmäinen sana on tietueen
koodi, jota käytetään \string\textcite- ja
\string\parencite"-komennoissa.  Sen jälkeen tulee pilkku ja joukko
nimettyjä kenttiä kuten kirjan kirjoittaja (author), nimi (title),
alaotsikko (subtitle) ja julkaisija (publisher).  Kenttien sisällöt
laitetaan aaltosulkeisiin, tosin pelkkiä numeroita sisältävät kentät
voi kirjoittaa ilmankin.

Kirjoittajien nimet kirjoitetaan tietuekenttään pääosin täysin
tavanomaisella tavalla.  Vaihtoehtoisesti nimi voidaan esittää myös
muodossa sukunimi-pilkku-etunimi (Aho, Alfred V.), ja joissakin
erityistapauksissa (esimerkiksi moniosainen väliviivaton sukunimi) se
on myös pakko tehdä niin.  Jos kirjoittajia on useita, heidän nimensä
erotetaan sanalla and (jota ei pidä suomentaa!).  Jos kaikkia
kirjoittajia ei luetella, laitetaan viimeisen nimen perään (ilman
lainausmerkkejä) ''and others''.

Jos lähteen tekijäksi on merkitty jokin organisaatio, sen nimi pitää
kirjoittaa ylimääräisiin
aaltosulkeisiin \parencite[esim.][]{unicode620}:

\begingroup\footnotesize
\begin{verbatim}
@Book{unicode620,
  author =       {{Unicode Consortium}},
  title =        {The Unicode Standard, Version 6.2.0},
  year =         {2012},
  url =          {http://www.unicode.org/versions/Unicode6.2.0/},
  urldate =      {2013-01-29}
}
\end{verbatim}
\endgroup

Jos lähteellä ei jostain syystä ole lainkaan mimettyä tekijää, tulee
author-kenttä jättää kokonaan pois, jolloin lähdeviitteeseen tulee
tekijän tilalle otsikko \parencite[esim.][]{presidential-novel}:

\begingroup\footnotesize
\begin{verbatim}
@Book{presidential-novel,
  title =        {O},
  subtitle =     {A Presidential Novel},
  publisher =    {Simon \& Schuster},
  year =         {2011},
}
\end{verbatim}
\endgroup

Tieteellinen lehtiartikkeli \parencite[esim.][]{strachey-fundamentals}
kirjoitetaan esimerkiksi seuraavanlaiseksi tietueeksi:

\begingroup\footnotesize
\begin{verbatim}
@Article{strachey-fundamentals,
  author =       {Christopher Strachey},
  title =        {Fundamental Concepts in Programming Languages},
  journal =      {Higher-Order and Symbolic Computation},
  year =         2000,
  volume =       13,
  number =       {1--2},
  pages =        {11--49},
  doi =          {10.1023/A:1010000313106}
}
\end{verbatim}
\endgroup

Huomaa erityisesti kenttä doi, johon voi kirjoittaa artikkelin
digitaalisen tunnisteen (Digital Object Identifier, DOI).  Se on
yleensä parempi valinta kuin mikään URL, koska DOI on pysyvä
artikkelin tunnistetieto.  Useimmat DOIt on lisäksi muutettavissa
URLiksi lisäämällä sen alkuun \url{http://dx.doi.org/}.

Jos netissä olevan lähteen DOI ei ole tiedossa (tai sitä ei ole
lainkaan), voi käyttää url-kenttää ja sen kaverina urldate-kenttää,
jolla ilmaistaan (muodossa VVVV--KK--PP) verkossa olevan lähteen
viittauspäivä.  Linkki kannattaa valita huolella siten, että se on
mahdollisimman tarkka ja mahdollisimman pitkään voimassa -- jos
sivulla on erikseen osoitettu pysyvä linkki (engl.~\emph{permanent
  link}), sitä on syytä käyttää.

Viitattaessa WWW-sivuun, joka ei ole kirja tai artikkeli tai muukaan
julkaisu, voidaan käyttää
online-tietuetyyppiä \parencite[esim.][]{debian-social-contract}:

\begingroup\footnotesize
\begin{verbatim}
@Online{debian-social-contract,
  title =        {Debian Social Contract},
  year =         {2004},
  url =          {http://www.debian.org/social_contract.en.html},
  urldate =      {2013-01-29}
}
\end{verbatim}
\endgroup

Jotkin lähteet ovat toimitettuja kokoomateoksia, jotka koostuvat
itsenäisistä artikkeleista.  Yleensä tällöin viitataan johonkin sen
osa"-artikkeliin \parencite[esim.][]{prechelt-credibility} eikä koko
kokoomateokseen.  Tällöin sekä teos että viitatut artikkelit lisätään
tietokantaan omina tietueinaan, ja kussakin artikkelitietueessa
viitataan kokoomateokseen käyttäen
crossref"-kenttää:\footnote{Sallittua on myös yhdistää artikkeli ja
  kokoomateos yhdeksi InCollection-tietueeksi, esimerkiksi jos
  kokoomateoksesta viitataan vain yhteen artikkeeliin.  Tällöin
  kokoomateoksen nimi tulee booktitle"-kenttään eikä crossref"-kenttää
  käytetä.}

\begingroup\footnotesize
\begin{verbatim}
@Collection{making-software,
  editor =       {Andy Oram and Greg Wilson},
  title =        {Making Software},
  subtitle =     {What Really Works, and Why We Believe It},
  publisher =    {O'Reilly},
  year =         2011
}
@InCollection{prechelt-credibility,
  author =       {Lutz Prechelt and Marian Petre},
  title =        {Credibility, or Why Should I Insist on Being
                  Convinced},
  crossref =     {making-software},
  pages =        {17--34}
}
\end{verbatim}
\endgroup

Huomaa, kuinka kokoomateoksella on toimittajia (editor) eikä tekijöitä
(author).

Tarkempia tietoja lähdetietokannan rakenteesta löytyy
\textsc{Bib\TeX}in manuaalista \parencite{bibtexing},
\textsc{Bib\LaTeX}in manuaalista \parencite[luku~2]{biblatex-manual}
sekä \textsc{Bib\LaTeX}-Chicagon manuaalista
\parencite[luvut 5.1--5.2]{biblatex-chicago-manual}.  Lisää
esimerkkejä löydät myös tämän oppaan lähdekoodista.

\section{Lähdeluettelo}

Lähdetietokanta muutetaan lähdeluetteloksi apuohjelmalla {biber}.  Se
on varsin uusi, joten se puuttuu useimmista koneista, joiden
\TeX-asennus ei ole aivan ajantasalla.  Yliopiston suorakäyttökoneista
se löytyy tällä hetkellä vain charra.it.jyu.fi-koneesta.
Ubuntu-asennuksiin se on saatavissa versiosta 12.10 alkaen ja
Debian-asennuksiin Wheezystä alkaen.  Windowsiin se on asennettavissa
Mik\TeX-pakettina miktex-biber-bin.\footnote{Valitettavasti tämä
  paketti on tällä hetkellä saatavissa vain 32-bittiseen Mik\TeX iin.}

Komentoriviltä biberin käyttö on yksinkertaista.  Kun \LaTeX\ (tai
pdf\LaTeX) on kerran ajettu, ajetaan biber parametrinaan dokumentin
nimi.  Tämän jälkeen ajetaan \LaTeX\ (tai pdf\LaTeX) vähintään kerran
(kunnes edellisen ajon lopussa ei enää pyydetä uutta ajoa).
Esimerkiksi näin:

\begingroup\footnotesize
\begin{verbatim}
$ pdflatex malliopas
[...]
Package biblatex Warning: Please (re)run Biber on the file:
(biblatex)                malliopas
(biblatex)                and rerun LaTeX afterwards.
[..]
Output written on malliopas.pdf (18 pages, 96855 bytes).
Transcript written on malliopas.log.
$ biber malliopas
INFO - This is Biber 0.9.9
[...]
INFO - Output to malliopas.bbl
$ pdflatex malliopas
[...]
LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.
[...]
Output written on malliopas.pdf (21 pages, 107373 bytes).
Transcript written on malliopas.log.
$ pdflatex malliopas
[...]
Output written on malliopas.pdf (21 pages, 107509 bytes).
Transcript written on malliopas.log.
\end{verbatim}
\endgroup

\section{Tiedossa olevat ongelmat}

Lähdeluettelon ja lähdeviitteiden toiminta ei ole toistaiseksi aivan
virheetöntä.

Jos artikkelilla ei ole tekijää, lähdeluettelossa kyseisen artikkelin
merkintä alkaa vuosiluvulla.  Tämä vika on korjattu
\textsc{Bib\LaTeX}-Chicagon versiossa 0.9.9c (julkaistu 15.3.2013).

Jos lähdetietokantaan kirjoittaa urldate-päiväyksen, tulee se
lähdeluetteloon virheellisessä muodossa.  Tämä vika on korjattu
\textsc{Bib\LaTeX}-Chicagon versiossa 0.9.9b (julkaistu 6.12.2012).

\chapter{Tutkielmapohjan erityispiirteet}

Pääsääntöisesti {gradu3} käyttäytyy kuten \LaTeX in mukana
tuleva {report}-kirjoitelmaluokka.  Eroja kuitenkin on:
\begin{itemize}
\item Sinun ei tarvitse ladata {inputenc}-, {fontenc}-
  eikä {babel}-pakettia.
  \begin{itemize}
  \item Käyttämäsi merkistö sinun pitää ilmoittaa
    {\string\documentclass}-komennon optiona.  Nykyään {utf8} on
    yleensä sopiva valinta, joskin joissakin tilanteissa latin1 tai
    latin9 voi tulla myös kyseeseen.
  \item Jos tutkielmasi on englanninkielinen, ilmoita se
    {\string\documentclass}-komennon optiolla {english}.
  \end{itemize}
\item Jos tutkielmasi on kandidaatintutkielma, käytä
  {\string\documentclass}-komennon optiota {bachelor}.
\item Ilmoita tutkielmasi metatiedot taulukossa~\ref{tbl:metatiedot}
  esitetyillä komennoilla.  Ne tulee antaa ennen
  {\string\maketitle}-komentoa.
\begin{table}[h]\centering
  \begin{tabular}{lp{9cm}}
    \toprule
    Komento & Tarkoitus \\
    \midrule
    {\string\title}
    & Työn otsikko (älä käytä {\string\thanks}-komentoa) \\
    {\string\translatedtitle}
    & Suomenkielisen työn englanninkielinen otsikko,
    englanninkielisen työn suomenkielinen otsikko\\
    {\string\studyline}
    & Suuntautumisvaihtoehtosi \\
    {\string\tiivistelma}
    & Suomenkielinen tiivistelmä \\
    {\string\abstract}
    & Englanninkielinen abstrakti \\
    {\string\avainsanat}
    & Suomenkieliset avainsanat \\
    {\string\keywords}
    & Englanninkieliset avainsanat \\
    {\string\author}
    & Kirjoittajan nimi (jos useita, anna kukin omana komentonaan -- {\string\and}-komentoa ei tueta) \\
    {\string\contactinformation}
    & Kirjoittajan yhteystiedot \\
    {\string\supervisor}
    & Tutkielman ohjaaja (jos useita, anna kukin omana komentonaan)\\
    \bottomrule
  \end{tabular}
  \caption{Metatietojen ilmoituskomennot}\label{tbl:metatiedot}
\end{table}
\item Voit \string\maketitle-komennon jälkeen halutessasi kirjoittaa
  esipuheen.  Sen otsikon saat komennolla \string\preface.
\item Mahdollisen esipuheen jälkeen voit kirjoittaa termiluettelon
  käyttämällä thetermlist-ympäristöä.  Sen sisällä voit käyttää
  \string\item[\textit{termi}]"-komentoa merkitsemään määriteltävän
  termin.
\item Käytä \string\maketitle-komennon ja mahdollisten esipuheen ja
  termiluettelon jälkeen \string\mainmatter"-komentoa.  Se laatii
  automaattisesti tarvittavat sisällys-, kuvio- ja taulukkoluettelot.
\item Komentoja \string\subsubsection, \string\paragraph{} ja
  \string\subparagraph{} ei tueta.
\item Liitteet eivät ole lukuja (\string\chapter) vaan alilukuja
  (\string\section).
\item Lähdeluettelon ja lähdeviitteiden tekemisestä kerrottiin
  edellisessä luvussa.
\end{itemize}

\chapter{Yhteenveto}

Tutkielman viimeinen luku on Yhteenveto.  Sen on hyvä olla lyhyt;
siinä todetaan, mitä tutkielmassa esitetyn nojalla voidaan sanoa
johdannon väitteen totuudesta tai tutkimuskysymyksen vastauksesta.
Yhteenvedossa tuodaan myös esille tutkielman heikkoudet (erityisesti
tekijät, jotka heikentävät tutkielman tulosten luotettavuutta), ellei
niitä ole jo aiemmin tuotu esiin esimerkiksi Pohdinta-luvussa.  Tässä
luvussa voidaan myös tuoda esille, mitä tutkimusta olisi tämän
tutkielman tulosten valossa syytä tehdä seuraavaksi.

Jos Yhteenveto alkaa pitkittyä, se kannattaa jakaa kahtia niin, että
tulosten tulkinta otetaan omaksi Pohdinta-luvukseen, jolloin
Yhteenvedosta tulee varsin lyhyt ja lakoninen.

Yhteenvedon jälkeen tulee \string\printbibliography-komennolla
laadittu lähdeluettelo ja sen jälkeen mahdolliset liitteet.

\printbibliography

\appendix
\section{Siirtyminen gradu2:sta gradu3:een}

Keskeneräisen tutkielman siirtäminen gradu2:sta gradu3:een ei ole
kovin vaikeata.  Aluksi on totta kai vaihdettava
\string\documentclass-komennossa gradu2 gradu3:ksi.  Komennon
optioista suurin osa on poistettava, koska niitä ei enää tueta;
ainoastaan merkistön ilmoittava optio jää jäljelle.  Mahdollinen
kandi-optio vaihdetaan optioksi bachelor.

Taulukossa~\ref{tbl:cmdchange} on lueteltu tarvittavat
komentovaihdokset.  Viiva tarkoittaa, ettei vastaavaa komentoa ole
lainkaan.  Huomaa erityisesti uudet komennot.

\begin{table}[h]\centering
  \begin{tabular}{ll}
    \toprule
    gradu2                 & gradu3  \\
    \midrule
    ---                    & \string\maketitle \\
    ---                    & \string\supervisor \\
    \string\acmccs         & --- \\
    \string\aine           & \string\subject\\
    \string\copyrightowner & --- \\
    \string\fulltitle      & --- \\
    \string\laitos         & \string\department\\
    \string\license        & --- \\
    \string\linja          & \string\studyline\\
    \string\paikka         & --- \\
    \string\setauthor      & \string\author\\
    \string\termlist       & thetermlist-ympäristö\\
    \string\tyyppi         & \string\type\\
    \string\yhteystiedot   & \string\contactinformation\\
    \string\yliopisto      & \string\university\\
    \string\ysa            & --- \\
    \bottomrule
  \end{tabular}
  \caption{Komentomuutokset gradu2:sta gradu3:een}
  \label{tbl:cmdchange}
\end{table}

Isoin työ voi aiheutua lähdeluettelon laatimistekniikan muuttumiseen
sopeutumisesta.

\section{Harvemmin tarvittavat ominaisuudet}

Aiemmin esiteltyjen lisäksi gradu3 tarjoaa seuraavat lisäominaisuudet:
\begin{itemize}
\item \LaTeXe:n vakio-optiot draft ja final toimivat.
\item Vaikka tutkielman suomenkielisyyttä ei tarvitse erikseen
  mainita, finnish-optio toimii.
\item \string\university-komennolla voit ilmoittaa tutkielman
  kotiyliopistoksi jonkin muun kuin Jyväskylän yliopiston.
\item  \string\department-komennolla voit ilmoittaa tutkielman
  kotilaitokseksi jonkin muun kuin Tietotekniikan laitoksen.
\item \string\subject-komennolla voit ilmoittaa tutkielman
  oppiaineeksi jonkin muun kuin tietotekniikan.  Huomaa, että oppiaine
  tulisi suomenkielisissä tutkielmissa kirjoittaa genetiivimuodossa ja
  isolla alkukirjaimella (''Tietotekniikan''), englanninkielisissä
  tuktkielmissa in-preposition kanssa (''in Information Technology'').
\item \string\type-komennolla voit ilmoittaa tutkielman tyypin, jos se
  on jokin muu kuin pro gradu (oletus) tai kandidaatintutkielma
  (optiolla bachelor).
\item \string\setdate-komennolla voit asettaa päivämäärän
  haluamaksesi.  Anna komennolle kolme parametria -- päivä,
  kuukausi ja vuosi -- numeerisessa muodossa.
\item Ympäristöllä chapterquote voit laittaa luvun alkuun
  mietelauseen.  Sillä on yksi pakollinen parametri (lainauksen
  attribuutio).
\item Komento \string\graduclsdate\ sisältää käytössä olevan gradu3:n
  julkaisupäivämäärän ja \string\graduclsversion\ sen versionumeron.
\end{itemize}
\end{document}
